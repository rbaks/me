{"pageProps":{"post":{"title":"Deploy your Next.js website to github pages with Github Actions","publishedAt":"2022-03-15","summary":"Work with Next.js as with Vercel, but without Vercel, but with Github pages, without Vercel","image":"/static/images/banner.png","featured":true,"draft":false,"body":{"raw":"\nThe [2021 Stackoverflow developer survey](https://insights.stackoverflow.com/survey/2021#most-popular-technologies-webframe-prof) revealed the massive adoption of Meta's [React.js](https://reactjs.org/) open source library within the frontend industry.\n\n<Image\n  alt=\"Stackoverflow developer survey\"\n  src={`/static/images/Nextjs/React-developer-survey.png`}\n  width={730}\n/>\n\nIn the meantime, developers started gathering maximum best practices on core [web vitals](https://web.dev/vitals/) to boost the performance of their websites and get better [search engine optimization](https://en.wikipedia.org/wiki/Search_engine_optimization).\n\nHowever, this is a lot of code to maintain that you are tempted to create a superset of React.js yourself to continue implementing those best practices across all of your websites.\n\nThankfully, some group of engineers from [Vercel](https://vercel.com/) made and maintains all of this for us. Meet **[Next.js](https://nextjs.org/)**, **the React Framework for production**.\nNext.js is a static site generator that seats on top of React.js and offers performance out of the box. It has features such as :\n\n- [File-system routing](https://nextjs.org/docs/routing/introduction) as opposed to the React router\n- [Image Optimization](https://nextjs.org/docs/basic-features/image-optimization) out of the box\n- [Static-site generation](https://nextjs.org/docs/basic-features/data-fetching/get-static-props) and [server-side rendering](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n- [Code splitting and Bundling](https://nextjs.org/docs)\n- [API Routes](https://nextjs.org/docs/api-routes/introduction)\n\nAnd much more with [Zero configuration](https://nextjs.org/docs/getting-started). Next.js was then the way to go for people who cares a lot about performance.\n\nCurrently, the Vercel platform offers the simplest method of deploying your Next.js app to the internet, but it is not without its shortcomings.\n\n<ProsCard\n  title=\"Pros of Vercel deployment\"\n  pros={[\n    'Designed for Nextjs and all of its features',\n    'Deploy in seconds',\n    'Serve your content at the edge',\n    'Serverless functions'\n  ]}\n/>\n\n<ConsCard\n  title=\"Cons of Vercel deployment\"\n  cons={[\n    'Vendor lock-in (Flexibility issues)',\n    'SSL certificate problems with some domain names',\n    'Might not be free forever'\n  ]}\n/>\n\nThanks to the Vercel team, they thought about us and added the [`export`](https://nextjs.org/docs/advanced-features/static-html-export) feature to the Next.js Framework.\n\n> next export allows you to export your Next.js application to static HTML, which can be run standalone without the need of a Node.js server.\n\nIn other words, it allows us to deploy our Next.js website to [Github pages](https://pages.github.com/) that has no certificate problems, is always free, is fully flexible, has no data owned by third parties and is developer friendly. Thank you Vercel ðŸ¥³ðŸ¥³ðŸ¥³.\n\nNevertheless, there is no such thing as perfection. It is recommended to only use next export if you don't need any of the [unsupported features](https://nextjs.org/docs/advanced-features/static-html-export#unsupported-features) requiring a server. That is the purpose of this article where we will go through all the steps of configuring your Next.js website to mimic the normal Vercel deployment on GitHub Pages, which reflects how I made this entire portfolio website.\n\n## Table of Contents\n\n- [Prerequisites](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#prerequisites)\n- [Project setup](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#project-setup)\n- [Continuous integration](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#continuous-integration)\n- [Fixing links](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#fixing-links)\n- [The public folder](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#the-public-folder)\n- [Environment variables](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#environment-variables)\n- [Image Optimization](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#image-optimization)\n- [Conclusion](/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#conclusion)\n\n## Prerequisites\n\n- Have and LTS version of [Node.js](https://nodejs.org/en/) installed on your computer\n\nThis command should output a version number.\n\n```bash\n$ node --version\n```\n\n- Make sure you have [npm](https://www.npmjs.com/) installed (which should be after installing node.js)\n\n```bash\n$ npm --version\n```\n\n- Have a text editor ready on your computer, I am using [Visual Studio Code](https://code.visualstudio.com/)\n- Install [git](https://git-scm.com/) on your computer and follow the setup instructions guide\n\n```bash\n$ git --version\n```\n\n- Log in or create a [Github](https://github.com/) account\n\n## Project setup\n\nCreate a Next.js website with TypeScript (typescript is optional).\n\n```bash\n$ npx create-next-app --typescript\n```\n\n`cd` into your newly created Nextjs project and open with your editor. If you now run\n\n```bash\n$ npm run dev\n```\n\nand open your browser to [localhost:3000](http://localhost:3000/) (by default), your site will look like this.\n\n<ImageWithTheme\n  alt=\"Hello world\"\n  src={`/static/images/Nextjs/helloworld.png`}\n  width={730}\n/>\n\nWhat a piece of art ðŸ¤© !\n\nIn your `package.json` file, add the export script into the `scripts` section.\n\n```diff\n\"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n+   \"export\": \"next export\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\"\n  },\n```\n\nIn the `pages/index.tsx` or `pages/index.jsx` of your project, replace the `<Image />` component to legacy `<img>` html tag and remove the import.\n\n```diff\n- <Image src=\"/vercel.svg\" alt=\"Vercel Logo\" width={72} height={16} />\n+ <img src=\"/vercel.svg\" alt=\"Vercel Logo\" width={72} height={16} />\n```\n\n```diff\n- import Image from \"next/image\";\n```\n\nIn your `/public` folder, place a `.nojekyll` file to disable Github Pages from trying to create a [Jekyll](https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/) website.\n\nNow run the following commands.\n\n```bash\n$ npm run build\n$ npm run export\n```\n\nThese commands should not output any errors. Note that for already big next projects, the `export` command outputs errors if you are:\n\n- using [getInitialProps](https://nextjs.org/docs/api-reference/data-fetching/get-initial-props) in your project\n- using [getServersideProps](https://nextjs.org/docs/api-reference/data-fetching/get-server-side-props)\n- returning a `fallback` to `true` in your [getStaticPaths](https://nextjs.org/docs/basic-features/data-fetching/get-static-paths)\n\n## Continuous integration\n\nNow that you have no error output, Put a `deploy.yml` file in a `.github/workflows/` folder you will create in your root directory. Below is the content of the `deploy.yml` file. : (pay attention to indentation)\n\n```yml\nname: Node.js CI\n\non:\n  push:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [12.x, 14.x, 16.x]\n        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/\n\n    steps:\n      - uses: actions/checkout@v2\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v2\n        with:\n          node-version: ${{ matrix.node-version }}\n          cache: 'npm'\n      - run: npm i\n      - run: npm run build\n      - run: npm run export\n\n      - name: Deploy ðŸš€\n        uses: JamesIves/github-pages-deploy-action@v4.2.5\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          branch: gh-pages # The branch the action should deploy to.\n          folder: out # The folder the action should deploy.\n```\n\nNow create a github repository for your new Nextjs project. Commit your local changes and push them to your github repo.\n\n```bash\n$ git add .\n$ git commit -m \"Initialize repository and CI workflow\"\n$ git remote add origin <your-github-repo-url>\n$ git push -u origin main\n```\n\nHave a look at the Actions tab in your Github repository to see the workflow running. What this action does is described in the `deploy.yml` file we just created and it will always fire up whenever you push to the `main` branch of your remote repository.\n\nWait until all the jobs have been checked off. Now you have one extra branch `gh-pages` created by the workflow to host your static files from the `out/` folder.\nGo to your settings tabs and make sure you have your `gh-pages` branch selected for the github pages source.\n\n<ImageWithTheme\n  alt=\"Github Setting\"\n  light={`/static/images/Nextjs/settingslight.png`}\n  dark={`/static/images/Nextjs/settingsdark.png`}\n  width={730}\n/>\n\nIf not, run your workflow again in the Actions tab. Now your site is deployed to Github pages and you can access it via `<your-github-username>.github.io/<your-repo-name>` and it looks ... horrible ðŸ¤£.\n\n<Image\n  alt=\"Site malconfigured\"\n  src={`/static/images/Nextjs/site-not-conf.png`}\n  width={730}\n/>\n\nWhere them CSSes at? What just happened is that Next.js looks for your static assets from the base url but our github pages website has a `repo-name` suffix attached to it so it can't find neither the js nor the css files.\n\n## Fixing links\n\nFrom Nextjs version 9.5+, we can configure a custom [`assetPrefix`](https://nextjs.org/docs/api-reference/next.config.js/cdn-support-with-asset-prefix) and Next.js will automatically use your prefix in the scripts it loads.\n\nTo do so, create or go to your `next.config.js` file and add the following.\n\n```diff\n+ const isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n   reactStrictMode: true,\n+  basePath = isProd ? '/<your-repo-name>' : '',\n+  assetPrefix = isProd ? '/<your-repo-name>' : ''\n}\n```\n\nNote the [`basePath`](https://nextjs.org/docs/api-reference/next.config.js/basepath) value we added which Next.js also uses as prefix for links with [`next/link`](https://nextjs.org/docs/api-reference/next/link) components we might add later to the website.\n\nPush your changes again to the main branch repo after committing your changes. The workflow will then automatically rerun the deployment scripts and update your deployed website.\n\n## The public folder\n\nNow we believe we are done with links, but will find out later that assets originating from the `public/` folder will still not be visible in Next.js.\n\n> Next.js will automatically use your prefix in the scripts it loads, but this has no effect whatsoever on the public folder.\n\nTherefore, the prefix for these assets has to be handled manually. Like for images :\n\n```jsx\nconst assetPrefix = '/<your-repo-name>';\n\n<img\n  src={`${assetPrefix}${src}`}\n  alt={alt}\n  width={width}\n  height={height}\n  className={className}\n></img>;\n```\n\nFonts :\n\n```css\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 100 900;\n  font-display: optional;\n  src: url(/<your-repo-name>/ibm-plex-sans-var.woff2) format('woff2');\n}\n```\n\nAnd everything laying in the `public/` folder. It now becomes a big problem because when our repository name changes, we have to update everything referencing the value while hoping not to miss any.\n\n## Environment variables\n\nFirst rule of coding is to never hard code changing values. Keeping the first rule in mind is the second. We should consider using global variables or even environment variables.\n\nWe can benefit from those environment variables by just making a little modification to our `deploy.yml` file :\n\n```diff\n...\n  - name: Use Node.js ${{ matrix.node-version }}\n    uses: actions/setup-node@v2\n    with:\n      node-version: ${{ matrix.node-version }}\n      cache: 'npm'\n  - run: npm i\n  - run: npm run build\n+   env:\n+     NEXT_PUBLIC_BASE_PATH: /<your-repo-name>\n  - run: npm run export\n+   env:\n+     NEXT_PUBLIC_BASE_PATH: /<your-repo-name>\n...\n```\n\nand reference the value by its name in the `next.config.js` file :\n\n```diff\n- const isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n   reactStrictMode: true,\n-  basePath = isProd ? '/<your-repo-name>' : '',\n-  assetPrefix = isProd ? '/<your-repo-name>' : ''\n+  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || '',\n+  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || ''\n}\n```\n\nAs well as in all files having an `<img>` tag, but it is recommended to create a custom `<Image />` component in a `components/` folder in the root directory and use this component all over the project.\n\n```tsx\nimport React from 'react';\n\nconst Image = ({ src, alt, width, height, className }) => {\n  return (\n    <img\n      src={`${process.env.NEXT_PUBLIC_BASE_PATH || ''}${src}`}\n      alt={alt}\n      width={width}\n      height={height}\n      className={className}\n    ></img>\n  );\n};\n\nexport default Image;\n```\n\n## Image optimization\n\nNow that all of our images display correctly across the entire website and environment variables saved us from sleepless nights of production debugging, it is time to tackle image optimization because Nextjs automatically optimizes them at runtime with Vercel so we should mimic the same functionality.\n\nRun the following command to install [`next-optimized-image`](https://github.com/cyrilwanner/next-optimized-images) package.\n\n```bash\n$ npm install next-optimized-images\n```\n\nEnable the plugin in your `next.config.js` file:\n\n```diff\n+ const withPlugins = require('next-compose-plugins');\n+ const optimizedImages = require('next-optimized-images');\n\n+ module.exports = withPlugins([\n+  [optimizedImages, {\n+    /* config for next-optimized-images */\n+  }],\n   reactStrictMode: true,\n   assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || '',\n   assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || ''\n+]);\n```\n\nYou can see the [configuration Section](https://github.com/cyrilwanner/next-optimized-images#configuration) of `next-optimized-images` for all available config options.\n\n## Conclusion\n\nDeploying your Next app to GitHub Pages is not the most intuitive way of doing it, and by far. Vercel would offer the _one click_ deploy option every normal people would use but I don't write articles for normal people :). Nonetheless, taking this challenge taught us some really important aspect of software develoment, that is, mastering CI workflows a bit and factoring our code to prevent bugs (but not switching to dark mode :)). I hope this article helped his readers a lot and please do not hesitate to create an issue or make pull requests on this article, I appreciate any contributions.\n","code":"var Component=(()=>{var u=Object.create;var t=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var y=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),b=(a,s)=>{for(var i in s)t(a,i,{get:s[i],enumerable:!0})},h=(a,s,i,n)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of g(s))!f.call(a,c)&&c!==i&&t(a,c,{get:()=>s[c],enumerable:!(n=N(s,c))||n.enumerable});return a};var x=(a,s,i)=>(i=a!=null?u(k(a)):{},h(s||!a||!a.__esModule?t(i,\"default\",{value:a,enumerable:!0}):i,a)),w=a=>h(t({},\"__esModule\",{value:!0}),a);var m=y((_,p)=>{p.exports=_jsx_runtime});var I={};b(I,{default:()=>P,frontmatter:()=>v});var e=x(m()),v={title:\"Deploy your Next.js website to github pages with Github Actions\",publishedAt:\"2022-03-15\",summary:\"Work with Next.js as with Vercel, but without Vercel, but with Github pages, without Vercel\",image:\"/static/images/banner.png\",featured:!0,draft:!1};function j(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",ul:\"ul\",li:\"li\",code:\"code\",blockquote:\"blockquote\",h2:\"h2\",span:\"span\",pre:\"pre\",em:\"em\"},a.components),{Image:c,ProsCard:r,ConsCard:d,ImageWithTheme:o}=n;return d||l(\"ConsCard\",!0),c||l(\"Image\",!0),o||l(\"ImageWithTheme\",!0),r||l(\"ProsCard\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.a,{href:\"https://insights.stackoverflow.com/survey/2021#most-popular-technologies-webframe-prof\",children:\"2021 Stackoverflow developer survey\"}),\" revealed the massive adoption of Meta's \",(0,e.jsx)(n.a,{href:\"https://reactjs.org/\",children:\"React.js\"}),\" open source library within the frontend industry.\"]}),`\n`,(0,e.jsx)(c,{alt:\"Stackoverflow developer survey\",src:\"/static/images/Nextjs/React-developer-survey.png\",width:730}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the meantime, developers started gathering maximum best practices on core \",(0,e.jsx)(n.a,{href:\"https://web.dev/vitals/\",children:\"web vitals\"}),\" to boost the performance of their websites and get better \",(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/Search_engine_optimization\",children:\"search engine optimization\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"However, this is a lot of code to maintain that you are tempted to create a superset of React.js yourself to continue implementing those best practices across all of your websites.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Thankfully, some group of engineers from \",(0,e.jsx)(n.a,{href:\"https://vercel.com/\",children:\"Vercel\"}),\" made and maintains all of this for us. Meet \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/\",children:\"Next.js\"})}),\", \",(0,e.jsx)(n.strong,{children:\"the React Framework for production\"}),`.\nNext.js is a static site generator that seats on top of React.js and offers performance out of the box. It has features such as :`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/routing/introduction\",children:\"File-system routing\"}),\" as opposed to the React router\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/basic-features/image-optimization\",children:\"Image Optimization\"}),\" out of the box\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/basic-features/data-fetching/get-static-props\",children:\"Static-site generation\"}),\" and \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props\",children:\"server-side rendering\"})]}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs\",children:\"Code splitting and Bundling\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-routes/introduction\",children:\"API Routes\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"And much more with \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/getting-started\",children:\"Zero configuration\"}),\". Next.js was then the way to go for people who cares a lot about performance.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Currently, the Vercel platform offers the simplest method of deploying your Next.js app to the internet, but it is not without its shortcomings.\"}),`\n`,(0,e.jsx)(r,{title:\"Pros of Vercel deployment\",pros:[\"Designed for Nextjs and all of its features\",\"Deploy in seconds\",\"Serve your content at the edge\",\"Serverless functions\"]}),`\n`,(0,e.jsx)(d,{title:\"Cons of Vercel deployment\",cons:[\"Vendor lock-in (Flexibility issues)\",\"SSL certificate problems with some domain names\",\"Might not be free forever\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Thanks to the Vercel team, they thought about us and added the \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/advanced-features/static-html-export\",children:(0,e.jsx)(n.code,{children:\"export\"})}),\" feature to the Next.js Framework.\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"next export allows you to export your Next.js application to static HTML, which can be run standalone without the need of a Node.js server.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In other words, it allows us to deploy our Next.js website to \",(0,e.jsx)(n.a,{href:\"https://pages.github.com/\",children:\"Github pages\"}),\" that has no certificate problems, is always free, is fully flexible, has no data owned by third parties and is developer friendly. Thank you Vercel \\u{1F973}\\u{1F973}\\u{1F973}.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Nevertheless, there is no such thing as perfection. It is recommended to only use next export if you don't need any of the \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/advanced-features/static-html-export#unsupported-features\",children:\"unsupported features\"}),\" requiring a server. That is the purpose of this article where we will go through all the steps of configuring your Next.js website to mimic the normal Vercel deployment on GitHub Pages, which reflects how I made this entire portfolio website.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"table-of-contents\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#table-of-contents\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Table of Contents\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#prerequisites\",children:\"Prerequisites\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#project-setup\",children:\"Project setup\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#continuous-integration\",children:\"Continuous integration\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#fixing-links\",children:\"Fixing links\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#the-public-folder\",children:\"The public folder\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#environment-variables\",children:\"Environment variables\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#image-optimization\",children:\"Image Optimization\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"/blog/deploy-your-next-js-website-to-github-pages-with-github-actions#conclusion\",children:\"Conclusion\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"prerequisites\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#prerequisites\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Prerequisites\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Have and LTS version of \",(0,e.jsx)(n.a,{href:\"https://nodejs.org/en/\",children:\"Node.js\"}),\" installed on your computer\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"This command should output a version number.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"node\"}),` --version\n`]})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Make sure you have \",(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/\",children:\"npm\"}),\" installed (which should be after installing node.js)\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),` --version\n`]})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Have a text editor ready on your computer, I am using \",(0,e.jsx)(n.a,{href:\"https://code.visualstudio.com/\",children:\"Visual Studio Code\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Install \",(0,e.jsx)(n.a,{href:\"https://git-scm.com/\",children:\"git\"}),\" on your computer and follow the setup instructions guide\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` --version\n`]})})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Log in or create a \",(0,e.jsx)(n.a,{href:\"https://github.com/\",children:\"Github\"}),\" account\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"project-setup\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#project-setup\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Project setup\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Create a Next.js website with TypeScript (typescript is optional).\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`$ npx create-next-app --typescript\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"cd\"}),\" into your newly created Nextjs project and open with your editor. If you now run\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),` run dev\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"and open your browser to \",(0,e.jsx)(n.a,{href:\"http://localhost:3000/\",children:\"localhost:3000\"}),\" (by default), your site will look like this.\"]}),`\n`,(0,e.jsx)(o,{alt:\"Hello world\",src:\"/static/images/Nextjs/helloworld.png\",width:730}),`\n`,(0,e.jsx)(n.p,{children:\"What a piece of art \\u{1F929} !\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"In your \",(0,e.jsx)(n.code,{children:\"package.json\"}),\" file, add the export script into the \",(0,e.jsx)(n.code,{children:\"scripts\"}),\" section.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`\"scripts\": {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   \"dev\": \"next dev\",\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   \"build\": \"next build\",\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   \"export\": \"next export\",\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   \"start\": \"next start\",\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   \"lint\": \"next lint\"\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` },\n`})]})})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the \",(0,e.jsx)(n.code,{children:\"pages/index.tsx\"}),\" or \",(0,e.jsx)(n.code,{children:\"pages/index.jsx\"}),\" of your project, replace the \",(0,e.jsx)(n.code,{children:\"<Image />\"}),\" component to legacy \",(0,e.jsx)(n.code,{children:\"<img>\"}),\" html tag and remove the import.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line deleted\",children:(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` <Image src=\"/vercel.svg\" alt=\"Vercel Logo\" width={72} height={16} />\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token deleted-sign deleted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` <img src=\"/vercel.svg\" alt=\"Vercel Logo\" width={72} height={16} />\n`})]})]})]})}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsx)(n.code,{className:\"language-diff code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line deleted\",children:(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` import Image from \"next/image\";\n`})]})})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In your \",(0,e.jsx)(n.code,{children:\"/public\"}),\" folder, place a \",(0,e.jsx)(n.code,{children:\".nojekyll\"}),\" file to disable Github Pages from trying to create a \",(0,e.jsx)(n.a,{href:\"https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/\",children:\"Jekyll\"}),\" website.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now run the following commands.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),` run build\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" run \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"export\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"These commands should not output any errors. Note that for already big next projects, the \",(0,e.jsx)(n.code,{children:\"export\"}),\" command outputs errors if you are:\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"using \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-reference/data-fetching/get-initial-props\",children:\"getInitialProps\"}),\" in your project\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"using \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-reference/data-fetching/get-server-side-props\",children:\"getServersideProps\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"returning a \",(0,e.jsx)(n.code,{children:\"fallback\"}),\" to \",(0,e.jsx)(n.code,{children:\"true\"}),\" in your \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/basic-features/data-fetching/get-static-paths\",children:\"getStaticPaths\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"continuous-integration\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#continuous-integration\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Continuous integration\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now that you have no error output, Put a \",(0,e.jsx)(n.code,{children:\"deploy.yml\"}),\" file in a \",(0,e.jsx)(n.code,{children:\".github/workflows/\"}),\" folder you will create in your root directory. Below is the content of the \",(0,e.jsx)(n.code,{children:\"deploy.yml\"}),\" file. : (pay attention to indentation)\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yml\",children:(0,e.jsxs)(n.code,{className:\"language-yml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Node.js CI\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"branches\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"jobs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"runs-on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ubuntu\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`latest\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"strategy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"matrix\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"node-version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"12.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" 14.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" 16.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# See supported Node.js release schedule at https://nodejs.org/en/about/releases/\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"steps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` actions/checkout@v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" Use Node.js $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" matrix.node\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"version \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" actions/setup\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`node@v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"node-version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" matrix.node\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"version \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cache\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'npm'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` npm i\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` npm run build\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` npm run export\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Deploy \\u{1F680}\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" JamesIves/github\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pages\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"deploy\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v4.2.5\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"GITHUB_TOKEN\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.GITHUB_TOKEN \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"branch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" gh\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pages \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The branch the action should deploy to.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"folder\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" out \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The folder the action should deploy.\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now create a github repository for your new Nextjs project. Commit your local changes and push them to your github repo.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"add\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),\" commit -m \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Initialize repository and CI workflow\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),\" remote \",(0,e.jsx)(n.span,{className:\"token function\",children:\"add\"}),\" origin \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"your-github-repo-url\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` push -u origin main\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Have a look at the Actions tab in your Github repository to see the workflow running. What this action does is described in the \",(0,e.jsx)(n.code,{children:\"deploy.yml\"}),\" file we just created and it will always fire up whenever you push to the \",(0,e.jsx)(n.code,{children:\"main\"}),\" branch of your remote repository.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Wait until all the jobs have been checked off. Now you have one extra branch \",(0,e.jsx)(n.code,{children:\"gh-pages\"}),\" created by the workflow to host your static files from the \",(0,e.jsx)(n.code,{children:\"out/\"}),` folder.\nGo to your settings tabs and make sure you have your `,(0,e.jsx)(n.code,{children:\"gh-pages\"}),\" branch selected for the github pages source.\"]}),`\n`,(0,e.jsx)(o,{alt:\"Github Setting\",light:\"/static/images/Nextjs/settingslight.png\",dark:\"/static/images/Nextjs/settingsdark.png\",width:730}),`\n`,(0,e.jsxs)(n.p,{children:[\"If not, run your workflow again in the Actions tab. Now your site is deployed to Github pages and you can access it via \",(0,e.jsx)(n.code,{children:\"<your-github-username>.github.io/<your-repo-name>\"}),\" and it looks ... horrible \\u{1F923}.\"]}),`\n`,(0,e.jsx)(c,{alt:\"Site malconfigured\",src:\"/static/images/Nextjs/site-not-conf.png\",width:730}),`\n`,(0,e.jsxs)(n.p,{children:[\"Where them CSSes at? What just happened is that Next.js looks for your static assets from the base url but our github pages website has a \",(0,e.jsx)(n.code,{children:\"repo-name\"}),\" suffix attached to it so it can't find neither the js nor the css files.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"fixing-links\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#fixing-links\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Fixing links\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"From Nextjs version 9.5+, we can configure a custom \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-reference/next.config.js/cdn-support-with-asset-prefix\",children:(0,e.jsx)(n.code,{children:\"assetPrefix\"})}),\" and Next.js will automatically use your prefix in the scripts it loads.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To do so, create or go to your \",(0,e.jsx)(n.code,{children:\"next.config.js\"}),\" file and add the following.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` const isProd = process.env.NODE_ENV === 'production'\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`module.exports = {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  reactStrictMode: true,\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  basePath = isProd ? '/<your-repo-name>' : '',\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = isProd ? '/<your-repo-name>' : ''\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`}\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Note the \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-reference/next.config.js/basepath\",children:(0,e.jsx)(n.code,{children:\"basePath\"})}),\" value we added which Next.js also uses as prefix for links with \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-reference/next/link\",children:(0,e.jsx)(n.code,{children:\"next/link\"})}),\" components we might add later to the website.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Push your changes again to the main branch repo after committing your changes. The workflow will then automatically rerun the deployment scripts and update your deployed website.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"the-public-folder\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#the-public-folder\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The public folder\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now we believe we are done with links, but will find out later that assets originating from the \",(0,e.jsx)(n.code,{children:\"public/\"}),\" folder will still not be visible in Next.js.\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Next.js will automatically use your prefix in the scripts it loads, but this has no effect whatsoever on the public folder.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Therefore, the prefix for these assets has to be handled manually. Like for images :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-jsx\",children:(0,e.jsxs)(n.code,{className:\"language-jsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" assetPrefix \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/<your-repo-name>'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"img\"]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"src\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"assetPrefix\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"src\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"alt\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"alt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"width\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"width\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"height\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"height\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"className\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"className\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"img\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Fonts :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-css\",children:(0,e.jsxs)(n.code,{className:\"language-css code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule\",children:(0,e.jsx)(n.span,{className:\"token rule\",children:\"@font-face\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"font-family\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'IBM Plex Sans'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"font-style\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" normal\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"font-weight\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"100\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"900\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"font-display\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" optional\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"src\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsxs)(n.span,{className:\"token url\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"url\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"/<your-repo-name>/ibm-plex-sans-var.woff2\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'woff2'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"And everything laying in the \",(0,e.jsx)(n.code,{children:\"public/\"}),\" folder. It now becomes a big problem because when our repository name changes, we have to update everything referencing the value while hoping not to miss any.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"environment-variables\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#environment-variables\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Environment variables\"]}),`\n`,(0,e.jsx)(n.p,{children:\"First rule of coding is to never hard code changing values. Keeping the first rule in mind is the second. We should consider using global variables or even environment variables.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"We can benefit from those environment variables by just making a little modification to our \",(0,e.jsx)(n.code,{children:\"deploy.yml\"}),\" file :\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:\" - name: Use Node.js ${{ matrix.node-version }}\\n\"})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   uses: actions/setup-node@v2\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   with:\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:\"     node-version: ${{ matrix.node-version }}\\n\"})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`     cache: 'npm'\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` - run: npm i\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` - run: npm run build\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   env:\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`     NEXT_PUBLIC_BASE_PATH: /<your-repo-name>\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:` - run: npm run export\n`})]})]}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`   env:\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`     NEXT_PUBLIC_BASE_PATH: /<your-repo-name>\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`...\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"and reference the value by its name in the \",(0,e.jsx)(n.code,{children:\"next.config.js\"}),\" file :\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line deleted\",children:(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` const isProd = process.env.NODE_ENV === 'production'\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token deleted-sign deleted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`module.exports = {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  reactStrictMode: true,\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line deleted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  basePath = isProd ? '/<your-repo-name>' : '',\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line deleted\",children:(0,e.jsxs)(n.span,{className:\"token deleted-sign deleted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix deleted\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = isProd ? '/<your-repo-name>' : ''\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token deleted-sign deleted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || '',\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || ''\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`}\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"As well as in all files having an \",(0,e.jsx)(n.code,{children:\"<img>\"}),\" tag, but it is recommended to create a custom \",(0,e.jsx)(n.code,{children:\"<Image />\"}),\" component in a \",(0,e.jsx)(n.code,{children:\"components/\"}),\" folder in the root directory and use this component all over the project.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"language-tsx code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"Image\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" src\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" alt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" className \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"img\"]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"src\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"process\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"env\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"NEXT_PUBLIC_BASE_PATH\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"src\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"alt\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"alt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"width\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"width\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"height\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"height\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"className\"}),(0,e.jsxs)(n.span,{className:\"token script language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"className\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"img\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"image-optimization\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#image-optimization\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Image optimization\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Now that all of our images display correctly across the entire website and environment variables saved us from sleepless nights of production debugging, it is time to tackle image optimization because Nextjs automatically optimizes them at runtime with Vercel so we should mimic the same functionality.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Run the following command to install \",(0,e.jsx)(n.a,{href:\"https://github.com/cyrilwanner/next-optimized-images\",children:(0,e.jsx)(n.code,{children:\"next-optimized-image\"})}),\" package.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` next-optimized-images\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Enable the plugin in your \",(0,e.jsx)(n.code,{children:\"next.config.js\"}),\" file:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-diff\",children:(0,e.jsxs)(n.code,{className:\"language-diff code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` const withPlugins = require('next-compose-plugins');\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` const optimizedImages = require('next-optimized-images');\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:` module.exports = withPlugins([\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  [optimizedImages, {\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`    /* config for next-optimized-images */\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line inserted\",children:(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  }],\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token inserted-sign inserted\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  reactStrictMode: true,\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || '',\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token unchanged\",children:[(0,e.jsx)(n.span,{className:\"token line\"}),(0,e.jsx)(n.span,{className:\"token prefix unchanged\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token line\",children:`  assetPrefix = process.env.NEXT_PUBLIC_BASE_PATH || ''\n`})]})}),(0,e.jsxs)(n.span,{className:\"code-line inserted\",children:[(0,e.jsx)(n.span,{className:\"token unchanged\",children:(0,e.jsx)(n.span,{className:\"token line\"})}),(0,e.jsxs)(n.span,{className:\"token inserted-sign inserted\",children:[(0,e.jsx)(n.span,{className:\"token prefix inserted\",children:\"+\"}),(0,e.jsx)(n.span,{className:\"token line\",children:`]);\n`})]})]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can see the \",(0,e.jsx)(n.a,{href:\"https://github.com/cyrilwanner/next-optimized-images#configuration\",children:\"configuration Section\"}),\" of \",(0,e.jsx)(n.code,{children:\"next-optimized-images\"}),\" for all available config options.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Deploying your Next app to GitHub Pages is not the most intuitive way of doing it, and by far. Vercel would offer the \",(0,e.jsx)(n.em,{children:\"one click\"}),\" deploy option every normal people would use but I don't write articles for normal people :). Nonetheless, taking this challenge taught us some really important aspect of software develoment, that is, mastering CI workflows a bit and factoring our code to prevent bugs (but not switching to dark mode :)). I hope this article helped his readers a lot and please do not hesitate to create an issue or make pull requests on this article, I appreciate any contributions.\"]})]})}}var P=j;function l(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(I);})();\n;return Component;"},"_id":"blog/deploy-your-next-js-website-to-github-pages-with-github-actions.mdx","_raw":{"sourceFilePath":"blog/deploy-your-next-js-website-to-github-pages-with-github-actions.mdx","sourceFileName":"deploy-your-next-js-website-to-github-pages-with-github-actions.mdx","sourceFileDir":"blog","contentType":"mdx","flattenedPath":"blog/deploy-your-next-js-website-to-github-pages-with-github-actions"},"type":"Blog","readingTime":{"text":"9 min read","minutes":8.99,"time":539400,"words":1798},"wordCount":1800,"slug":"deploy-your-next-js-website-to-github-pages-with-github-actions"}},"__N_SSG":true}